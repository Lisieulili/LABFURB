---
title: "Dívida líquida do Estado de Santa Catarina e municípios"
format:
  html:
    self-contained: true
    css: estilo.css
editor: visual
---

``` r
echo=FALSE, message=FALSE, warning=FALSE}
library(GetBCBData)
library(tidyverse)
library(gganimate)
library(gifski)
library(lubridate)
```

## Código 15145

O código 15145 do Sistema de Coleta de Dados do Banco Central reúne informações sobre a dívida líquida dos municípios de Santa Catarina e mostra o quanto esses governos realmente devem, descontando o que já têm em caixa. Analisar esses dados é importante para entender a situação fiscal do Estado, os limites para novos gastos e o impacto disso na vida da população, já que o nível de endividamento influencia diretamente a capacidade de investimento em áreas essenciais como saúde, educação e infraestrutura.

``` r
# Baixar os dados
df.bcb <- gbcbd_get_series(id = 15145,
                           first.date = '2007-01-12',
                           last.date = Sys.Date(),
                           format.data = 'long')

# Preparar dados para animação
df.bcb <- df.bcb %>%
  mutate(ano = year(ref.date),
         mes = month(ref.date, label = TRUE),
         periodo = paste(ano, mes)) %>%
  arrange(ref.date)

# Criar gráfico animado
grafico_animado <- ggplot(df.bcb, aes(x = ref.date, y = value)) +
  geom_line(color = "#1f77b4", size = 1) +
  labs(
    title = "Dívida Líquida do Estado de Santa Catarina e Municípios",
    subtitle = "Período: {closest_state}",
    x = "Data",
    y = "Dívida líquida (% do PIB)"
  ) +
  theme_minimal() +
  transition_states(periodo, transition_length = 2, state_length = 1) +
  shadow_mark()

# Salvar o GIF animado
anim_save("grafico_dívida_sc.gif", animate(grafico_animado, width = 800, height = 400))
```

conclusão

**Feito por Lígia Isaura Sartori.**
